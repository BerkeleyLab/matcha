Workflows
=========

* [Vibe Coding](#vibe-coding)
* [Idiomatic Vibe Coding](#idiomatic-vibe-coding)

Vibe Coding
-----------
1. In a Linux or macOS shell, set your present working directory to Matcha's
   [scripts](../../scripts) directory.   Enter the command
   `./create-single-source-file-programs.sh`, which creates a copy of the Matcha
   test suite and supporting software stack all concatenated into one file:
   test-suite.F90 in [build/single-file-programs](../../build/single-file-programs).
2. Compile and execute test-suite.F90 to check that the output reports that
   all tests pass.  For example, enter
   ```bash
     gfortran -fcoarray=single -o test-suite test-suite.F90
     ./test-suite
   ```
3. Use the contents of [vibe-coding/README.md](./vibe-coding/README.md) as your
   prompt to a large language model (LLM).
4. In test-suite.F90, replace the lines beginning and ending with 
   `module procedure laplacian` and `end procedure laplacian`, respectively,
   with the LLM's response.
5. Compile test-suite.F90 as in step 2 again.
6. If test-suite.F90 doesn't compile or if running the compiled program does not
   produce output indicating that all tests pass, then start over start over at
   step 1 but when you reach step 3, append the following to the aforementioned
   prompt:
  b. The previous iteration's compile-time or run-time error messages,
  a. "Please fix the above errors generated by the following response to my
     previous prompt:",
  c. The LLM-generated code from the previous iteration.
   
Idiomatic Vibe Coding
---------------------
Follow the [vibe coding](#vibe-coding) steps except as described below.

* In your first prompt, attach the file test-suite.F90 with the lines
  from `module procedure laplacian` to `end procedure` removed.
  Rename the file test-suite.txt if the LLM rejects .F90 file extensions.
  Add the text "Inserting your response into subdmodule subdomain_s,
  and compiling and running the attached program must generate output 
  indicating that all tests pass."
* If inserting the LLM's repsonse into subdomain_s leads to compile-time or
  runtime errors or if any tests fail, attach the file containing the program
  with the LLM's response inserted. Add the text "Please fix the attached
  program, which contains a candidate solution to the above prompt.  The candidate
  solution generates the following messages:"  Insert any compile-time or
  runtime error messages or test output.
